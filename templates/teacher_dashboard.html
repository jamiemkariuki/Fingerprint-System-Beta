{% extends 'base.html' %}
{% block content %}
<div style="display: flex; justify-content: space-between; align-items: center;">
    <h2>Teacher Dashboard</h2>
    <a href="{{ url_for('teacher.register_user') }}" class="btn">Register Student</a>
</div>

<div class="card">
    <h3>Teacher Information</h3>
    <p><strong>Name:</strong> {{ teacher_info.name }}</p>
    <p><strong>Username:</strong> {{ teacher_info.username }}</p>
    <p><strong>Email:</strong> {{ teacher_info.email }}</p>
    <p><strong>Class:</strong> {{ teacher_info.class }}</p>
</div>

<div class="card">
    <form method="get" action="{{ url_for('teacher.teacher_dashboard') }}" style="display: flex; gap: 10px; align-items: center;">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
        <label style="margin-bottom: 0;">
            Filter by class
            <select name="class" id="class-select">
                <option value="">All</option>
                {% for c in classes %}
                    <option value="{{ c }}" {% if selected_class == c %}selected{% endif %}>{{ c }}</option>
                {% endfor %}
            </select>
        </label>
        <button type="submit">Filter</button>
        {% if selected_class %}
        <a href="{{ url_for('teacher.class_attendance_pdf', class_name=selected_class) }}" class="btn btn-secondary" target="_blank">Generate Class PDF</a>
        {% endif %}
    </form>
</div>

<div class="card">
    <div class="table-responsive">
        <table>
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Class</th>
                    <th>Status (Today)</th>
                </tr>
            </thead>
            <tbody>
                {% for user in users %}
                    <tr>
                        <td>{{ user.name }}</td>
                        <td>{{ user.class }}</td>
                        <td>
                            {% if user.status == 'Present' %}
                                <span class="status-present">Present</span>
                            {% else %}
                                <span class="status-absent">Absent</span>
                            {% endif %}
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}